TARGET=test
CC=g++
OBJ=test.o
CFLAGS=-g -DNDEBUG -O3 -I/usr/include -I/usr/local/include 
CXXFLAGS=-I../include -std=c++11
LDFLAGS= -L/usr/lib -L/usr/local/lib -lpthread -lcpptest -lboost_context -lboost_system -lboost_thread -lboost_chrono

all : $(TARGET)

test.o : test.cpp test.h ../include/taskpp/task.h ../include/taskpp/shared_stack.h ../include/taskpp/call_in_new_stack.h
	$(CC) -c $(CFLAGS) $(CXXFLAGS) -o $@ $< 

$(TARGET) : $(OBJ)
	libtool --tag=CXX --mode=link $(CC) $(LDFLAGS) -o $@ $^

clean:
	rm $(TARGET) $(OBJ) -f
